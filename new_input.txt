COPY	START	1000
FIRST	STRL	RETADR
CLOOP	SUBJ	RDREC
--	LDAC	LENGTH
--	COMP	ZERO
--	JMPEQ	ENDFIL
--	SUBJ	WRREC
--	J	CLOOP
ENDFIL	LDAC	EOF
--	STAC	BUFFER
--	LDAC	THREE
--	STAC	LENGTH
--	SUBJ	WRREC
--	LOADL	RETADR
--	SUBR	--
EOF	BYTE	C'EOF'
THREE	WORD	3
ZERO	WORD	0
RETADR	RESERW	1
LENGTH	RESERW	1
BUFFER	RESERB	4096
RDREC	LOADX	ZERO
--	LDAC	ZERO
RLOOP	DT	INPUT
--	JMPEQ	RLOOP
--	DR	INPUT
--	COMP	ZERO
--	JMPEQ	EXIT
--	STRCH	BUFFER,X
--	FIX	MAXLEN
--	JMPLT	RLOOP
EXIT	STREX	LENGTH
--	SUBR	--
INPUT	BYTE	X'F1'
MAXLEN	WORD	4096
WRREC	LOADX	ZERO
WLOOP	DT	OUTPUT
--	JMPEQ	WLOOP
--	LOADCH	BUFFER,X
--	DW	OUTPUT
--	FIX	LENGTH
--	JMPLT	WLOOP
--	SUBR	--
OUTPUT	BYTE	X'05'
--	END	FIRST
